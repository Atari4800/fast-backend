\hypertarget{namespacepsycopg2_1_1extras}{}\doxysection{psycopg2.\+extras Namespace Reference}
\label{namespacepsycopg2_1_1extras}\index{psycopg2.extras@{psycopg2.extras}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_composite_caster}{Composite\+Caster}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_dict_connection}{Dict\+Connection}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_dict_cursor}{Dict\+Cursor}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_dict_cursor_base}{Dict\+Cursor\+Base}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_dict_row}{Dict\+Row}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_hstore_adapter}{Hstore\+Adapter}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_inet}{Inet}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_logging_connection}{Logging\+Connection}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_logging_cursor}{Logging\+Cursor}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_logical_replication_connection}{Logical\+Replication\+Connection}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_min_time_logging_connection}{Min\+Time\+Logging\+Connection}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_min_time_logging_cursor}{Min\+Time\+Logging\+Cursor}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_named_tuple_connection}{Named\+Tuple\+Connection}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_named_tuple_cursor}{Named\+Tuple\+Cursor}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_physical_replication_connection}{Physical\+Replication\+Connection}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_real_dict_connection}{Real\+Dict\+Connection}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_real_dict_cursor}{Real\+Dict\+Cursor}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_real_dict_row}{Real\+Dict\+Row}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_replication_cursor}{Replication\+Cursor}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_stop_replication}{Stop\+Replication}}
\item 
class \mbox{\hyperlink{classpsycopg2_1_1extras_1_1_u_u_i_d__adapter}{UUID\+\_\+adapter}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacepsycopg2_1_1extras_a2d751189f4b0d0522f4609f6884cbdaa}{register\+\_\+uuid}} (oids=None, conn\+\_\+or\+\_\+curs=None)
\item 
def \mbox{\hyperlink{namespacepsycopg2_1_1extras_a37d9e6dca10ed7d1c22a80e488066dff}{register\+\_\+inet}} (oid=None, conn\+\_\+or\+\_\+curs=None)
\item 
def \mbox{\hyperlink{namespacepsycopg2_1_1extras_a42d95f3dc6403e22dbbd9bdc152a0d42}{wait\+\_\+select}} (conn)
\item 
def \mbox{\hyperlink{namespacepsycopg2_1_1extras_a896c948af69083ffe0af8547128b9048}{register\+\_\+hstore}} (conn\+\_\+or\+\_\+curs, globally=False, unicode=False, oid=None, array\+\_\+oid=None)
\item 
def \mbox{\hyperlink{namespacepsycopg2_1_1extras_a254cfba39fec411fd266f14bd02a5153}{register\+\_\+composite}} (name, conn\+\_\+or\+\_\+curs, globally=False, factory=None)
\item 
def \mbox{\hyperlink{namespacepsycopg2_1_1extras_af32a94c89df3a122e0abce0a78252348}{execute\+\_\+batch}} (cur, sql, argslist, page\+\_\+size=100)
\item 
def \mbox{\hyperlink{namespacepsycopg2_1_1extras_a1e5af4093125f92b6fd277da3661b967}{execute\+\_\+values}} (cur, sql, argslist, template=None, page\+\_\+size=100, fetch=False)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Miscellaneous goodies for psycopg2

This module is a generic place used to hold little helper functions
and classes until a better place in the distribution is found.
\end{DoxyVerb}
 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacepsycopg2_1_1extras_af32a94c89df3a122e0abce0a78252348}\label{namespacepsycopg2_1_1extras_af32a94c89df3a122e0abce0a78252348}} 
\index{psycopg2.extras@{psycopg2.extras}!execute\_batch@{execute\_batch}}
\index{execute\_batch@{execute\_batch}!psycopg2.extras@{psycopg2.extras}}
\doxysubsubsection{\texorpdfstring{execute\_batch()}{execute\_batch()}}
{\footnotesize\ttfamily def psycopg2.\+extras.\+execute\+\_\+batch (\begin{DoxyParamCaption}\item[{}]{cur,  }\item[{}]{sql,  }\item[{}]{argslist,  }\item[{}]{page\+\_\+size = {\ttfamily 100} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Execute groups of statements in fewer server roundtrips.

Execute *sql* several times, against all parameters set (sequences or
mappings) found in *argslist*.

The function is semantically similar to

.. parsed-literal::

    *cur*\.\ `~cursor.executemany`\ (\ *sql*\ , *argslist*\ )

but has a different implementation: Psycopg will join the statements into
fewer multi-statement commands, each one containing at most *page_size*
statements, resulting in a reduced number of server roundtrips.

After the execution of the function the `cursor.rowcount` property will
**not** contain a total result.\end{DoxyVerb}
 \mbox{\Hypertarget{namespacepsycopg2_1_1extras_a1e5af4093125f92b6fd277da3661b967}\label{namespacepsycopg2_1_1extras_a1e5af4093125f92b6fd277da3661b967}} 
\index{psycopg2.extras@{psycopg2.extras}!execute\_values@{execute\_values}}
\index{execute\_values@{execute\_values}!psycopg2.extras@{psycopg2.extras}}
\doxysubsubsection{\texorpdfstring{execute\_values()}{execute\_values()}}
{\footnotesize\ttfamily def psycopg2.\+extras.\+execute\+\_\+values (\begin{DoxyParamCaption}\item[{}]{cur,  }\item[{}]{sql,  }\item[{}]{argslist,  }\item[{}]{template = {\ttfamily None},  }\item[{}]{page\+\_\+size = {\ttfamily 100},  }\item[{}]{fetch = {\ttfamily False} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Execute a statement using :sql:`VALUES` with a sequence of parameters.

:param cur: the cursor to use to execute the query.

:param sql: the query to execute. It must contain a single ``%s``
    placeholder, which will be replaced by a `VALUES list`__.
    Example: ``"INSERT INTO mytable (id, f1, f2) VALUES %s"``.

:param argslist: sequence of sequences or dictionaries with the arguments
    to send to the query. The type and content must be consistent with
    *template*.

:param template: the snippet to merge to every item in *argslist* to
    compose the query.

    - If the *argslist* items are sequences it should contain positional
      placeholders (e.g. ``"(%s, %s, %s)"``, or ``"(%s, %s, 42)``" if there
      are constants value...).

    - If the *argslist* items are mappings it should contain named
      placeholders (e.g. ``"(%(id)s, %(f1)s, 42)"``).

    If not specified, assume the arguments are sequence and use a simple
    positional template (i.e.  ``(%s, %s, ...)``), with the number of
    placeholders sniffed by the first element in *argslist*.

:param page_size: maximum number of *argslist* items to include in every
    statement. If there are more items the function will execute more than
    one statement.

:param fetch: if `!True` return the query results into a list (like in a
    `~cursor.fetchall()`).  Useful for queries with :sql:`RETURNING`
    clause.

.. __: https://www.postgresql.org/docs/current/static/queries-values.html

After the execution of the function the `cursor.rowcount` property will
**not** contain a total result.

While :sql:`INSERT` is an obvious candidate for this function it is
possible to use it with other statements, for example::

    >>> cur.execute(
    ... "create table test (id int primary key, v1 int, v2 int)")

    >>> execute_values(cur,
    ... "INSERT INTO test (id, v1, v2) VALUES %s",
    ... [(1, 2, 3), (4, 5, 6), (7, 8, 9)])

    >>> execute_values(cur,
    ... """UPDATE test SET v1 = data.v1 FROM (VALUES %s) AS data (id, v1)
    ... WHERE test.id = data.id""",
    ... [(1, 20), (4, 50)])

    >>> cur.execute("select * from test order by id")
    >>> cur.fetchall()
    [(1, 20, 3), (4, 50, 6), (7, 8, 9)])\end{DoxyVerb}
 \mbox{\Hypertarget{namespacepsycopg2_1_1extras_a254cfba39fec411fd266f14bd02a5153}\label{namespacepsycopg2_1_1extras_a254cfba39fec411fd266f14bd02a5153}} 
\index{psycopg2.extras@{psycopg2.extras}!register\_composite@{register\_composite}}
\index{register\_composite@{register\_composite}!psycopg2.extras@{psycopg2.extras}}
\doxysubsubsection{\texorpdfstring{register\_composite()}{register\_composite()}}
{\footnotesize\ttfamily def psycopg2.\+extras.\+register\+\_\+composite (\begin{DoxyParamCaption}\item[{}]{name,  }\item[{}]{conn\+\_\+or\+\_\+curs,  }\item[{}]{globally = {\ttfamily False},  }\item[{}]{factory = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Register a typecaster to convert a composite type into a tuple.

:param name: the name of a PostgreSQL composite type, e.g. created using
    the |CREATE TYPE|_ command
:param conn_or_curs: a connection or cursor used to find the type oid and
    components; the typecaster is registered in a scope limited to this
    object, unless *globally* is set to `!True`
:param globally: if `!False` (default) register the typecaster only on
    *conn_or_curs*, otherwise register it globally
:param factory: if specified it should be a `CompositeCaster` subclass: use
    it to :ref:`customize how to cast composite types <custom-composite>`
:return: the registered `CompositeCaster` or *factory* instance
    responsible for the conversion
\end{DoxyVerb}
 \mbox{\Hypertarget{namespacepsycopg2_1_1extras_a896c948af69083ffe0af8547128b9048}\label{namespacepsycopg2_1_1extras_a896c948af69083ffe0af8547128b9048}} 
\index{psycopg2.extras@{psycopg2.extras}!register\_hstore@{register\_hstore}}
\index{register\_hstore@{register\_hstore}!psycopg2.extras@{psycopg2.extras}}
\doxysubsubsection{\texorpdfstring{register\_hstore()}{register\_hstore()}}
{\footnotesize\ttfamily def psycopg2.\+extras.\+register\+\_\+hstore (\begin{DoxyParamCaption}\item[{}]{conn\+\_\+or\+\_\+curs,  }\item[{}]{globally = {\ttfamily False},  }\item[{}]{unicode = {\ttfamily False},  }\item[{}]{oid = {\ttfamily None},  }\item[{}]{array\+\_\+oid = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Register adapter and typecaster for `!dict`\-\ |hstore| conversions.

:param conn_or_curs: a connection or cursor: the typecaster will be
    registered only on this object unless *globally* is set to `!True`
:param globally: register the adapter globally, not only on *conn_or_curs*
:param unicode: if `!True`, keys and values returned from the database
    will be `!unicode` instead of `!str`. The option is not available on
    Python 3
:param oid: the OID of the |hstore| type if known. If not, it will be
    queried on *conn_or_curs*.
:param array_oid: the OID of the |hstore| array type if known. If not, it
    will be queried on *conn_or_curs*.

The connection or cursor passed to the function will be used to query the
database and look for the OID of the |hstore| type (which may be different
across databases). If querying is not desirable (e.g. with
:ref:`asynchronous connections <async-support>`) you may specify it in the
*oid* parameter, which can be found using a query such as :sql:`SELECT
'hstore'::regtype::oid`. Analogously you can obtain a value for *array_oid*
using a query such as :sql:`SELECT 'hstore[]'::regtype::oid`.

Note that, when passing a dictionary from Python to the database, both
strings and unicode keys and values are supported. Dictionaries returned
from the database have keys/values according to the *unicode* parameter.

The |hstore| contrib module must be already installed in the database
(executing the ``hstore.sql`` script in your ``contrib`` directory).
Raise `~psycopg2.ProgrammingError` if the type is not found.
\end{DoxyVerb}
 \mbox{\Hypertarget{namespacepsycopg2_1_1extras_a37d9e6dca10ed7d1c22a80e488066dff}\label{namespacepsycopg2_1_1extras_a37d9e6dca10ed7d1c22a80e488066dff}} 
\index{psycopg2.extras@{psycopg2.extras}!register\_inet@{register\_inet}}
\index{register\_inet@{register\_inet}!psycopg2.extras@{psycopg2.extras}}
\doxysubsubsection{\texorpdfstring{register\_inet()}{register\_inet()}}
{\footnotesize\ttfamily def psycopg2.\+extras.\+register\+\_\+inet (\begin{DoxyParamCaption}\item[{}]{oid = {\ttfamily None},  }\item[{}]{conn\+\_\+or\+\_\+curs = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Create the INET type and an Inet adapter.

:param oid: oid for the PostgreSQL :sql:`inet` type, or 2-items sequence
    with oids of the type and the array. If not specified, use PostgreSQL
    standard oids.
:param conn_or_curs: where to register the typecaster. If not specified,
    register it globally.
\end{DoxyVerb}
 \mbox{\Hypertarget{namespacepsycopg2_1_1extras_a2d751189f4b0d0522f4609f6884cbdaa}\label{namespacepsycopg2_1_1extras_a2d751189f4b0d0522f4609f6884cbdaa}} 
\index{psycopg2.extras@{psycopg2.extras}!register\_uuid@{register\_uuid}}
\index{register\_uuid@{register\_uuid}!psycopg2.extras@{psycopg2.extras}}
\doxysubsubsection{\texorpdfstring{register\_uuid()}{register\_uuid()}}
{\footnotesize\ttfamily def psycopg2.\+extras.\+register\+\_\+uuid (\begin{DoxyParamCaption}\item[{}]{oids = {\ttfamily None},  }\item[{}]{conn\+\_\+or\+\_\+curs = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Create the UUID type and an uuid.UUID adapter.

:param oids: oid for the PostgreSQL :sql:`uuid` type, or 2-items sequence
    with oids of the type and the array. If not specified, use PostgreSQL
    standard oids.
:param conn_or_curs: where to register the typecaster. If not specified,
    register it globally.
\end{DoxyVerb}
 \mbox{\Hypertarget{namespacepsycopg2_1_1extras_a42d95f3dc6403e22dbbd9bdc152a0d42}\label{namespacepsycopg2_1_1extras_a42d95f3dc6403e22dbbd9bdc152a0d42}} 
\index{psycopg2.extras@{psycopg2.extras}!wait\_select@{wait\_select}}
\index{wait\_select@{wait\_select}!psycopg2.extras@{psycopg2.extras}}
\doxysubsubsection{\texorpdfstring{wait\_select()}{wait\_select()}}
{\footnotesize\ttfamily def psycopg2.\+extras.\+wait\+\_\+select (\begin{DoxyParamCaption}\item[{}]{conn }\end{DoxyParamCaption})}

\begin{DoxyVerb}Wait until a connection or cursor has data available.

The function is an example of a wait callback to be registered with
`~psycopg2.extensions.set_wait_callback()`. This function uses
:py:func:`~select.select()` to wait for data to become available, and
therefore is able to handle/receive SIGINT/KeyboardInterrupt.
\end{DoxyVerb}
 